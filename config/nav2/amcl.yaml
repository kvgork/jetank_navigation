# AMCL (Adaptive Monte Carlo Localization) Configuration
# For JeTank robot localization in known maps

amcl:
  ros__parameters:
    use_sim_time: False

    # Filter parameters
    min_particles: 500
    max_particles: 2000

    # KLD sampling parameters
    pf_err: 0.05
    pf_z: 0.99

    # Update thresholds
    update_min_d: 0.1      # Min translation before update (m)
    update_min_a: 0.2      # Min rotation before update (rad)

    # Resample parameters
    resample_interval: 1
    recovery_alpha_slow: 0.0
    recovery_alpha_fast: 0.0

    # Frame IDs
    global_frame_id: "map"
    odom_frame_id: "odom"
    base_frame_id: "base_link"

    # TF broadcast
    tf_broadcast: true
    transform_tolerance: 1.0

    # Laser model
    laser_model_type: "likelihood_field"
    laser_likelihood_max_dist: 2.0
    laser_max_range: 1.5
    laser_min_range: 0.3
    max_beams: 60

    # Likelihood field parameters
    z_hit: 0.5
    z_rand: 0.5
    z_max: 0.05
    z_short: 0.05
    sigma_hit: 0.2

    # Odometry model (differential drive)
    robot_model_type: "differential"
    odom_model_type: "diff"

    # Odometry noise parameters
    # Format: [rotation_from_rotation, rotation_from_translation,
    #          translation_from_translation, translation_from_rotation]
    alpha1: 0.2    # Rotation noise from rotation
    alpha2: 0.2    # Rotation noise from translation
    alpha3: 0.2    # Translation noise from translation
    alpha4: 0.2    # Translation noise from rotation
    alpha5: 0.2    # Translation noise (strafe - not used for diff drive)

    # Initial pose (set via RViz or service call)
    set_initial_pose: false
    initial_pose:
      x: 0.0
      y: 0.0
      z: 0.0
      yaw: 0.0

    # Always set initial pose on first message received
    always_reset_initial_pose: false

    # First map message processing
    first_map_only: false

    # Scan topic
    scan_topic: scan
    map_topic: map

    # Publish rate
    save_pose_rate: 0.5
